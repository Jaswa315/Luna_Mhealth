#Template to lint dart code in package_path
parameters:
- name: package_path  
  default: ''
- name: package_name  
  default: ''

steps:
- script: |
    cd ${{ parameters.package_path }}
    flutter analyze
    if [[ $? -eq 1 ]]; then
      echo "##vso[task.logissue type=error]${{ parameters.package_name }} Linting issues found!"
      echo '##vso[task.complete result=Failed]'
      exit 0
    fi
  displayName: 'Lint ${{ parameters.package_name }} code'

#TODO that is commented out until TODOs are gone from code
#- script: |
#    grep -r -n "[\/#] *[Tt][oO][Dd][oO]" $(lunacore) $(lunaauthoring) $(lunamobile)
#    if [[ $? -eq 0 ]]; then
#      echo "##vso[task.logissue type=error]TODOs found!"
#      echo '##vso[task.complete result=Failed]'
#      exit 0
#    fi
#  displayName: 'Search for TODOs'
#  failOnStderr: true
#  condition: succeededOrFailed()
